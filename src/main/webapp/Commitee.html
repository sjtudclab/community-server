<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=620px,initial-scale=1,target-densitydpi=device-dpi,minimum-scale=1,maximum-scale=1,user-scalable=1" />  
    <meta name="product" content="Metro UI CSS Framework">
    <meta name="description" content="Simple responsive css framework">

    <link href="css/metro-bootstrap.css" rel="stylesheet">
    <link href="css/metro-bootstrap-responsive.css" rel="stylesheet">
    <link href="css/iconFont.css" rel="stylesheet">
    <link href="css/docs.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <link href="js/prettify/prettify.css" rel="stylesheet">

    <!-- Load JavaScript Libraries -->
    <script src="js/jquery/jquery.min.js"></script>
    <script src="js/jquery/jquery.widget.min.js"></script>
    <script src="js/jquery/jquery.mousewheel.js"></script>
    <script src="js/prettify/prettify.js"></script>
    <script src="js/holder/holder.js"></script>

    <!-- Metro UI CSS JavaScript plugins -->
    <script src="js/load-metro.js"></script>
	<script src="js/common.js"></script>

    <!-- Local JavaScript -->

    <title>居委会</title>
</head>
<body class="metro">
    <header class="bg-dark" data-load="header.html"></header>

    <div class="container">
        <h1>
            <a href="/"><i class="icon-arrow-left-3 fg-darker smaller"></i></a>
          	  居委会<small class="on-right"></small>
        </h1>

        <p class="description">
                      下为本社区居委会干部，单击人物相片，进行留言操作
        </p>
        <div class="person-list">

            <div style="margin-top: 20px" class="person-list-container">
            </div>
        </div>


    </div> <!-- End of container -->

    <script src="js/hitua.js"></script>
    <script type="text/javascript">
    if (!String.prototype.format) {
      String.prototype.format = function() {
        var args = arguments;
        return this.replace(/{(\d+)}/g, function(match, number) { 
          return typeof args[number] != 'undefined'
            ? args[number]
            : match
          ;
        });
      };
    }

	(function($){
        $.ajax({
            type: "GET",
            url: 'rest/users/committee',
            success: function(data) {
                $(data).each(function(ind, el) {
                    var name = el.username;
                    var position = el.roles.reduce(function(s, r) {return s + r.name + ', ';}, '').slice(0, -2);
                    var html = 
                        '<div class="image-container shadow">' +
                        '<a target="_blank" href="{0}"><img src="images/{1}" class="polaroid"></a>'.format('http://www.baidu.com', 'default.jpg') +
                            '<div class="overlay">' +
                                '<span class="name-text">{0}</span><br>'.format(name) +
                                '<span class="position-text">{0}</span>'.format(position) +
                            '</div>' 
                        '</div>';
                    $('.person-list-container').append($(html));
                })
            },
            error: function(obj) {
                console.log(obj);
            }
        })
        })(jQuery);
	</script>

</body>
</html>