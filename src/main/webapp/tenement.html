<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=620px,initial-scale=1,target-densitydpi=device-dpi,minimum-scale=1,maximum-scale=1,user-scalable=1" />  
    <meta name="product" content="Metro UI CSS Framework">
    <meta name="description" content="Simple responsive css framework">
    <meta name="author" content="Sergey S. Pimenov, Ukraine, Kiev">

    <link href="css/metro-bootstrap.css" rel="stylesheet">
    <link href="css/metro-bootstrap-responsive.css" rel="stylesheet">
    <link href="css/iconFont.css" rel="stylesheet">
    <link href="css/docs.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <link href="js/prettify/prettify.css" rel="stylesheet">

    <!-- Load JavaScript Libraries -->
    <script src="js/jquery/jquery.min.js"></script>
    <script src="js/jquery/jquery.widget.min.js"></script>
    <script src="js/jquery/jquery.mousewheel.js"></script>
    <script src="js/prettify/prettify.js"></script>
    <script src="js/holder/holder.js"></script>

    <!-- Metro UI CSS JavaScript plugins -->
    <script src="js/load-metro.js"></script>

    <!-- Local JavaScript -->
    <script src="js/docs.js"></script>
    <script src="js/github.info.js"></script>
	<script src="js/common.js"></script>

    <title>物业人员</title>
</head>
<body class="metro">
    <!--
    <nav class="navigation-bar dark">
                <div class="navigation-bar-content">
                    <a href="/" class="element"><span class="icon-grid-view"></span> 可信社区 <sup>1.0</sup></a>
                    <span class="element-divider"></span>

                    <a class="pull-menu" href="#"></a>
                    <ul class="element-menu">
                        <li>
                            <a class="dropdown-toggle" href="#">社区公告</a>
                            <ul class="dropdown-menu dark" data-role="dropdown">
                                <li><a href="Announcement.html">公告浏览</a></li>
                                <li class="disabled"><a href="#">公告管理</a></li>
                            </ul>
                        </li>
                        <li>
                            <a class="dropdown-toggle"  href="Neighbour.html">左邻右舍</a>
                        </li>
                        <li>
                            <a class="dropdown-toggle"  href="Committee.html">居委会</a>
                        </li>
                    </ul>

                    <div class="no-tablet-portrait">
                        <span class="element-divider"></span>
                        <a class="element brand" href="#"><span class="icon-spin"></span></a>
                        <a class="element brand" href="#"><span class="icon-printer"></span></a>
                        <span class="element-divider"></span>

                        <div class="element input-element">
                            <form>
                                <div class="input-control text">
                                    <input type="text" placeholder="Search...">
                                    <button class="btn-search"></button>
                                </div>
                            </form>
                        </div>

                        <div class="element place-right">
                            <a class="dropdown-toggle" href="#">
                                <span class="icon-cog"></span>
                            </a>
                            <ul class="dropdown-menu place-right" data-role="dropdown">
                                <li><a href="#">更改个人信息</a></li>
                            </ul>
                        </div>
                        <span class="element-divider place-right"></span>
                        <button class="element image-button image-left place-right">
                            我
                            <img src="images/me.jpg"/>
                        </button>
                    </div>
                </div>
            </nav>
            -->

    <div class="container">
        <h1>
            <a href="start-screen-resident.html"><i class="icon-arrow-left-3 fg-darker smaller"></i></a>
              物业人员<small class="on-right"></small>
        </h1>

        <p class="description">
                      下为本社区物业人员，单击人物相片，进行留言操作
        </p>
        <div class="person-list">
            <div style="margin-top: 20px" class="person-list-container">
            </div>
        </div>


    </div> <!-- End of container -->

    <script src="js/hitua.js"></script>
    <script type="text/javascript">
    if (!String.prototype.format) {
      String.prototype.format = function() {
        var args = arguments;
        return this.replace(/{(\d+)}/g, function(match, number) { 
          return typeof args[number] != 'undefined'
            ? args[number]
            : match
          ;
        });
      };
    }

    (function($){
        $.ajax({
            type: "GET",
            url: 'rest/users/tenement',
            success: function(data) {
                var users = [];
                $(data).each(function(i, d) {
                    for (var r in d.roles) {
                        users.push({userid: d.id, username: d.username, role: d.roles[r], imageUrl: d.imageUrl});
                    }
                });

                $(users).each(function(ind, el) {
                    var name = el.username;
                    var position = el.role.name;
                    var html = 
                        '<div class="image-container shadow">' +
                        '<a  href="{0}"><img src="images/{1}" class=""></a>'.format('user_position.html?user_id={0}&role_id={1}&back_url={2}'.format(el.userid, el.role.id, 'tenement'), el.imageUrl) +
                            '<div class="overlay">' +
                                '<span class="name-text">{0}</span><br>'.format(name) +
                                '<span class="position-text">{0}</span>'.format(position) +
                            '</div>' 
                        '</div>';
                    $('.person-list-container').append($(html));
                });
            },
            error: function(obj) {
                console.log(obj);
            }
        })
        })(jQuery);
    </script>

</body>
</html>