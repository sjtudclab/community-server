<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
   <meta charset="utf-8" />
   <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
   <!-- Mobile viewport optimized: h5bp.com/viewport -->
   <meta name="viewport" content="width=device-width">

   <title>页面2</title>

   <meta name="robots" content="noindex, nofollow">
   <meta name="description" content="MetroUI-Web : Simple and complete web UI framework to create web apps with Windows 8 Metro user interface." />
   <meta name="keywords" content="metro, metroui, metro-ui, metro ui, windows 8, metro style, bootstrap, framework, web framework, css, html" />
   <meta name="author" content="AozoraLabs by Marcello Palmitessa"/>
   
   <link rel="stylesheet" type="text/css" href="content/css/bootstrap.css">
   <link rel="stylesheet" type="text/css" href="content/css/bootstrap-responsive.css">
   <link rel="stylesheet" type="text/css" href="content/css/bootmetro.css">
   <link rel="stylesheet" type="text/css" href="content/css/bootmetro-tiles.css">
   <link rel="stylesheet" type="text/css" href="content/css/bootmetro-charms.css">
   <link rel="stylesheet" type="text/css" href="content/css/metro-ui-light.css">
   <link rel="stylesheet" type="text/css" href="content/css/icomoon.css">

   <!--  these two css are to use only for documentation -->
   <link rel="stylesheet" type="text/css" href="content/css/demo.css">
   <link rel="stylesheet" type="text/css" href="scripts/google-code-prettify/prettify.css" >

   <!-- Le fav and touch icons -->
   <link rel="shortcut icon" href="content/ico/favicon.ico">
   <link rel="apple-touch-icon-precomposed" sizes="144x144" href="content/ico/apple-touch-icon-144-precomposed.png">
   <link rel="apple-touch-icon-precomposed" sizes="114x114" href="content/ico/apple-touch-icon-114-precomposed.png">
   <link rel="apple-touch-icon-precomposed" sizes="72x72" href="content/ico/apple-touch-icon-72-precomposed.png">
   <link rel="apple-touch-icon-precomposed" href="content/ico/apple-touch-icon-57-precomposed.png">
  


  
   <!-- All JavaScript at the bottom, except for Modernizr and Respond.
      Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
      For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->
   <script src="scripts/modernizr-2.6.1.min.js"></script>
   <script type="text/javascript" src="scripts/jquery-1.8.2.min.js"></script>
   <script language="javascript" type="text/javascript">
   $.extend({
	   getUrlVars: function(){
	     var vars = [], hash;
	     var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
	     for(var i = 0; i < hashes.length; i++)
	     {
	       hash = hashes[i].split('=');
	       vars.push(hash[0]);
	       vars[hash[0]] = hash[1];
	     }
	     return vars;
	   },
	   getUrlVar: function(name){
	     return $.getUrlVars()[name];
	   }
	 });

   var room_id, room_floor, room_location, room_resident, room_serialNumber, room_owner;
   var citizen;

	 $(function (){		
	 var initializationTime=(new Date()).getTime();
	 var manager_name = "admin";
	 showLeftTime();
   showRoom();	
   getUser();
	 function showLeftTime()
	 {
			var now=new Date();
			var year=now.getFullYear();
			var month=now.getMonth();
			var day=now.getDate();
			var hours=now.getHours();
			var minutes=now.getMinutes();
			var seconds=now.getSeconds();
			var timetable = ""+year+"年"+month+"月"+day+"日 ";
			if (hours < 10) 
				timetable += "0" + hours + ":";
			else
				timetable += hours + ":";
			if (minutes < 10)
				timetable += "0" + minutes + ":";
			else
				timetable += minutes + ":";
			if (seconds < 10)
				timetable += "0" + seconds + "";
			else
				timetable += seconds + "";
			
			document.all.showtime.innerHTML = timetable;
			var timeID=setTimeout(showLeftTime,1000);
	 }
	 function showRoom()
	 {
      room_id = $.getUrlVar('id').toString();
      room_floor = decodeURI(decodeURI($.getUrlVar('floor'))); 
      room_location = decodeURI(decodeURI($.getUrlVar('location')));
      room_resident = decodeURI(decodeURI($.getUrlVar('resident')));
      room_serialNumber = $.getUrlVar('serialNumber');
      room_owner = $.getUrlVar('owner').toString();
      document.all.showRoom.innerHTML = room_location + "-" + room_floor + "-" + (parseInt(room_serialNumber)%1000).toString();
      changeTable1(true);
	 }
   function getUser()
   {
      $.ajax(
      {
        url : "rest/apartment/" + room_id + "/citizen",
        dataType : "JSON",
        type : "GET",
        success : function(data){
            citizen = data;
            changeTable2(true);
        }
      }
      )
   }

	 })

    function changeTable1(flag)
    {
      var htm_temp = "";
      if (flag == true)
      {
        htm_temp += "<tr><th>序列号</th><th>"+room_serialNumber+"</th></tr>"
                 +  "<tr><th>所在位置</th><th>"+room_location+"</th></tr>"
                 +  "<tr><th>所在楼层</th><th>"+room_floor+"</th></tr>"
                 +  "<tr><th>房主数量</th><th>"+room_owner+"</th></tr>"
                 +  "<tr><th>居民</th><th>"+room_resident+"</th></tr>"; 
      }
      else
      {
        htm_temp += "<tr><th>序列号</th><th>"+room_serialNumber+"</th></tr>"
                 +  "<tr><th>所在位置</th><th><input id=\"t1_p2\" type=\"text\" value=\""+room_location+"\"></th></tr>"
                 +  "<tr><th>所在楼层</th><th><input id=\"t1_p3\" type=\"text\" value=\""+room_floor+"\"></th></tr>"
                 +  "<tr><th>房主数量</th><th><input id=\"t1_p4\" type=\"text\" value=\""+room_owner+"\"></th></tr>"
                 +  "<tr><th>居民</th><th><input id=\"t1_p5\" type=\"text\" value=\""+room_resident+"\"></th></tr>"; 
        htm_temp += "<tr><th><button align = \"center\" onclick = \"changeTable1Button(true)\">确定</button></th><th><button align = \"center\" onclick = \"changeTable1Button(false)\">取消</button></th></tr>";
      }
      document.all.table1.innerHTML = htm_temp;
    }
	
	  function changeTable1Button(flag) 
	  {
		  if (flag == true)
			{
        room_location = document.all.t1_p2.value;
        room_floor = document.all.t1_p3.value;
        room_owner = document.all.t1_p4.value;
        room_resident = document.all.t1_p5.value;
        changeTable1(true);
      }
      else
        changeTable1(true);
    }

    function changeTable2(flag)
    {
      var htm_temp = "";
      if (flag == true)
      {
        var i;
        for ( i = 0; i < citizen.length; i++ )
         // htm_temp += "<tr><th><img src=\"images/"+users[i].imageUrl+"\" height=\"100\" width=\"100\"></th><th><h2>"+users[i].username+"</h2></th></tr>";
         htm_temp += "<table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-top:20px\">" +
          "<tr><th>证件号</th><th>"+citizen[i].id.toString()+"</th></tr>" +       
          "<tr><th>姓名</th><th>"+citizen[i].name+"</th></tr>" +                
          "<tr><th>证件类型</th><th>"+citizen[i].credentialType+"</th></tr>" +      
          "<tr><th>婚姻状况</th><th>"+citizen[i].marriageStatus+"</th></tr>" +      
          "<tr><th>就业状况</th><th>"+citizen[i].employmentStatus+"</th></tr>" +    
          "<tr><th>户口性质</th><th>"+citizen[i].residenceType+"</th></tr>" +       
          "<tr><th>人户分离情况</th><th>"+citizen[i].residenceStatus+"</th></tr>" +     
          "<tr><th>文化程度</th><th>"+citizen[i].educationStatus+"</th></tr>" +     
          "<tr><th>政治面貌</th><th>"+citizen[i].politicsStatus+"</th></tr>" +      
          "<tr><th>民族</th><th>"+citizen[i].nation+"</th></tr>" +            
          "<tr><th>性别</th><th>"+citizen[i].gender+"</th></tr>" +             
          "<tr><th>侨情类别</th><th>"+citizen[i].emigrationStatus+"</th></tr>" +  
          "<tr><th>收入情况</th><th>"+citizen[i].incomeCategory+"</th></tr>" + 
          "</table>"   
      }
      else
      {
        
      }
      document.all.table2_add_point.innerHTML += htm_temp;
    }

	</script>

	<script src="js/common.js"></script>

</head>

<body data-accent="blue">
  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

   <!-- Subhead
   ================================================== -->
   <header id="nav-bar" class="container-fluid" >
      <div class="row-fluid">
         <div class="span8">
            <div id="header-container">
               <a id="backbutton" class="win-backbutton" href="index.html"></a>
               <h4 id="showtime" style="color:black;">显示时间的位置</h4>
               <div class="dropdown">
                  <a class="header-dropdown dropdown-toggle accent-color" data-toggle="dropdown" href="#" id = "showRoom">
                     未知
                  </a>
            </div>
            </div>
         </div>
         <div id="top-info" class="pull-right">
         <a href="#" class="pull-left">
            <div class="top-info-block">
               <h3 id = "showname">Admin</h3>
               <h4 id = "showdescription">admin</h4>
            </div>
            <div class="top-info-block">
               <b class="icon-user"></b>
            </div>
         </a>
         <hr class="separator pull-left"/>
         <a id="settings" class="pull-left" href="#">
            <b class="icon-settings"></b>
         </a>
      </div>
   </div>
   </header>
   
<!--    <div class="container">
      <p class="lead">Bootstrap is built on responsive 12-column grids, layouts, and components.</p>
   </div> -->
   
     <div class="container">
   
       <!-- Docs nav
       ================================================== -->
       <div class="row">
         <div class="span3 bs-docs-sidebar">
           <ul class="nav nav-list bs-docs-sidenav">
             <li><a href="#global"><i class="icon-chevron-right"></i>房屋信息</a></li>
             <li><a href="#gridSystem"><i class="icon-chevron-right"></i>人口信息</a></li>
             <li><a href="#fluidGridSystem"><i class="icon-chevron-right"></i>任务信息</a></li>
           </ul>
         </div>
         <div class="span9">
   
   
   
           <!-- Global Bootstrap settings
           ================================================== -->
          <section id="global">
            <div class="page-header">
              <h1>房屋信息</h1>
            </div>
			      <table width="100%" border="0">
			 	     <tr>
			 		    <th>
			 			    <h3 align = "left">基本信息</h3>     
			 		    </th>
			 		    <th>
			 			   <a style="float:right; text-align:right" onclick="changeTable1()">修改</a>
			 		    </th>
			 	     </tr>
			      </table>  			
             
            <table id="table1" width="100%" border="1" cellspacing="0" cellpadding="0">
            </table>
           
            <p>&nbsp;</p>
			      <p>&nbsp;</p>

          </section>
   
   
   
   
           <!-- Grid system
           ================================================== -->
           <section id="gridSystem">
             <div class="page-header">
               <h1>人口信息 
               </h1>
             </div>

             <table width="100%" border="0">
             <tr>
              <th>
                <h3 align = "left">住户信息</h3>     
              </th>
              <th>
               <a style="float:right; text-align:right" onclick="#">添加</a>
              </th>
             </tr>
            </table> 

            <div id = "table2_add_point">
<!--                <table id="table2" width="100%" border="1" cellspacing="0" cellpadding="0">
               </table> -->
            </div>
             

           </section>
   
   
           <!-- Fluid grid system
           ================================================== -->
           <section id="fluidGridSystem">
             <div class="page-header">
               <h1>任务信息</h1>
             </div>
   
             <h2>无数据</h2>
           </section>
   
   
   
   
 
   
   <div id="charms" class="win-ui-dark">
   
      <div id="theme-charms-section" class="charms-section">
         <div class="charms-header">
            <a href="#" class="close-charms win-command">
               <span class="win-commandimage win-commandring">&#xe05d;</span>
            </a>
            <h2>Settings</h2>
         </div>
   
         <div class="row-fluid">
            <div class="span12">
   
               <form class="">
                  <label for="win-theme-select">Change theme:</label>
                  <select id="win-theme-select" class="">
                     <option value="metro-ui-semilight">Semi-Light</option>
                     <option value="metro-ui-light">Light</option>
                     <option value="metro-ui-dark">Dark</option>
                  </select>
               </form>
   
            </div>
         </div>
      </div>
   
   </div>

 

   <script type="text/javascript" src="scripts/google-code-prettify/prettify.js"></script>
   <script type="text/javascript" src="scripts/jquery.mousewheel.js"></script>
   <script type="text/javascript" src="scripts/jquery.scrollTo.js"></script>
   <script type="text/javascript" src="scripts/bootstrap.min.js"></script>
   <script type="text/javascript" src="scripts/bootmetro.js"></script>
   <script type="text/javascript" src="scripts/bootmetro-charms.js"></script>
   <script type="text/javascript" src="scripts/demo.js"></script>
   <script type="text/javascript" src="scripts/holder.js"></script>

   <script type="text/javascript">
      $(".metro").metro();
   </script>
</body>
</html>
